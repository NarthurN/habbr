# –°—Ç–∞—Ç—É—Å —Ä—É—Å—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Habbr GraphQL API

## –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç **Habbr GraphQL API** –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã, —Ñ—É–Ω–∫—Ü–∏–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –≤–∞–∂–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

## ‚úÖ –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π (Domain Layer)
- **`internal/model/post.go`** - –ü–æ–ª–Ω–∞—è —Ä—É—Å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ Post
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Post —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–æ–ª–µ–π
  - PostInput, PostUpdateInput, PostFilter —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - –¢–∏–ø—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (PaginationInput, PostConnection, PostEdge, PageInfo)
  - –ú–µ—Ç–æ–¥—ã: Validate(), Update(), CanAddComments()
  - –§—É–Ω–∫—Ü–∏—è NewPost() —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º–∞

- **`internal/model/comment.go`** - –ü–æ–ª–Ω–∞—è —Ä—É—Å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ Comment
  - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Comment —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã
  - CommentInput, CommentUpdateInput, CommentFilter
  - –¢–∏–ø—ã –ø–æ–¥–ø–∏—Å–æ–∫ (CommentSubscriptionPayload)
  - –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ MaxCommentLength
  - –ú–µ—Ç–æ–¥—ã: Update(), IsRootComment(), CanBeRepliedTo(), AddChild(), GetDepth()
  - –§—É–Ω–∫—Ü–∏–∏: BuildCommentsTree(), FlattenCommentsTree() —Å –∞–Ω–∞–ª–∏–∑–æ–º —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

### 2. –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (Service Layer)
- **`internal/service/interfaces.go`** - –ü–æ–ª–Ω–∞—è —Ä—É—Å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
  - PostService —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
  - CommentService —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
  - SubscriptionService –¥–ª—è real-time WebSocket –ø–æ–¥–ø–∏—Å–æ–∫
  - –û–±—ä—è—Å–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞

### 3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Configuration)
- **`internal/config/config.go`** - –ü–æ–ª–Ω–∞—è —Ä—É—Å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  - Config, ServerConfig, DatabaseConfig, LoggerConfig
  - –ú–µ—Ç–æ–¥—ã: Load(), Validate(), GetServerAddress(), GetPostgresConnectionString()
  - –ü—Ä–∏–º–µ—Ä—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 4. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **`cmd/server/main.go`** - –ü–æ–ª–Ω–∞—è —Ä—É—Å—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  - –§—É–Ω–∫—Ü–∏—è main() —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  - –§—É–Ω–∫—Ü–∏–∏: setupLogger(), setupRepositories(), setupGraphQLServer()
  - setupHTTPHandlers(), waitForShutdown()
  - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
1. **`docs/API_DOCUMENTATION.md`** (925 —Å—Ç—Ä–æ–∫) - –ü–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–æ—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
2. **`docs/ARCHITECTURE.md`** (481 —Å—Ç—Ä–æ–∫–∞) - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
3. **`docs/CONTRIBUTING.md`** (592 —Å—Ç—Ä–æ–∫–∏) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
4. **`docs/API_EXAMPLES.md`** (924 —Å—Ç—Ä–æ–∫–∏) - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –æ–±–∑–æ—Ä** —Å –¥–∏–∞–≥—Ä–∞–º–º–æ–π —Å–ª–æ–µ–≤
- **–î–æ–º–µ–Ω–Ω—ã–π —Å–ª–æ–π** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
- **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π** - –æ–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- **–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞** - –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** - –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

## üõ†Ô∏è –ö–∞—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º:
- ‚úÖ –†—É—Å—Å–∫–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö API
- ‚úÖ –û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- ‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞
- ‚úÖ –ó–∞–º–µ—Ç–∫–∏ –æ–± –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –û–±—ä—è—Å–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
- ‚úÖ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞
- –ü–æ—à–∞–≥–æ–≤—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ:
```
PASS    github.com/NarthurN/habbr/internal/api/graphql/converter
PASS    github.com/NarthurN/habbr/internal/model
PASS    github.com/NarthurN/habbr/tests
```

–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **35 Go —Ñ–∞–π–ª–æ–≤** –≤ –ø—Ä–æ–µ–∫—Ç–µ
- **4 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** (2922 —Å—Ç—Ä–æ–∫–∏)
- **100% –ø–æ–∫—Ä—ã—Ç–∏–µ** –ø—É–±–ª–∏—á–Ω—ã—Ö API —Ä—É—Å—Å–∫–∏–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** –±–µ–∑ –æ—à–∏–±–æ–∫
- **–£—Å–ø–µ—à–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è** –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç **Habbr GraphQL API** –∏–º–µ–µ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é —Ä—É—Å—Å–∫—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –ø–æ–∫—Ä—ã–≤–∞—é—â—É—é –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–ª–µ–≥—á–∞–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ, –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ–≤–æ—Ä—è—â–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤.

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- **–ü–æ–ª–Ω–æ—Ç–∞**: –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ API
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å**: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∫–æ–¥–æ–º
- **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å**: –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ä–∞–∑–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
- **–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å**: –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
